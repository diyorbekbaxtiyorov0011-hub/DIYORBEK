<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supercar Elite | 3D Experience</title>
    <style>
        :root {
            --primary-green: #2ecc71;
            --dark-bg: #050505;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body { margin: 0; background: var(--dark-bg); color: white; font-family: 'Orbitron', sans-serif; overflow: hidden; }
        
        #canvas-container { width: 100vw; height: 100vh; position: relative; }

        /* Professional Overlay UI */
        .glass-ui {
            position: absolute;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            z-index: 100;
        }

        .side-panel {
            top: 50%; left: 30px;
            transform: translateY(-50%);
            width: 200px;
        }

        .admin-panel {
            bottom: -300px; left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 250px;
            transition: 0.5s ease-in-out;
            display: flex; gap: 20px;
        }

        .admin-panel.active { bottom: 20px; }

        /* Buttons & Text */
        .btn {
            background: var(--primary-green);
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 12px;
            transition: 0.3s;
        }

        .btn:hover { box-shadow: 0 0 20px var(--primary-green); }

        .car-card {
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            border: 1px solid var(--primary-green);
        }

        .toggle-admin {
            position: absolute; bottom: 20px; right: 20px;
            z-index: 101; cursor: pointer; color: var(--primary-green);
        }

        .stats { font-size: 12px; color: #888; margin-bottom: 5px; }
        h2 { margin: 0; font-size: 18px; color: var(--primary-green); }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="canvas-container">
        <div class="glass-ui side-panel">
            <h2>GARAGE V.1</h2>
            <div class="stats">ENGINE: V12 Hybrid</div>
            <div class="stats">SPEED: 350 KM/H</div>
            <hr style="border: 0.5px solid #333;">
            <p style="font-size: 10px;">TERZO MILLENNIO - Kelajak texnologiyasi asosida yaratilgan superkar.</p>
            <button class="btn" onclick="nextCar()">KEYINGI MASHINA</button>
        </div>

        <div class="toggle-admin" onclick="toggleAdmin()">⚙️ ADMIN PANEL</div>

        <div class="glass-ui admin-panel" id="adminPanel">
            <div class="car-card">
                <h3>MODELS</h3>
                <select id="carSelect" style="background:#000; color:white; width:100%;">
                    <option value="lambo">Lamborghini Terzo</option>
                    <option value="ferrari">Ferrari F40</option>
                    <option value="bugatti">Bugatti Chiron</option>
                </select>
                <br><br>
                <button class="btn" style="width:100%">UPDATE SCENE</button>
            </div>
            <div class="car-card">
                <h3>LIGHTING</h3>
                <input type="range" min="0" max="5" step="0.1" id="lightIntensity">
                <p>NEON INTENSITY</p>
            </div>
            <div class="car-card">
                <h3>SETTINGS</h3>
                <label><input type="checkbox" checked onchange="toggleAutoRotate()"> AUTO ROTATE</label><br>
                <label><input type="checkbox" id="wireframeToggle"> WIREFRAME MODE</label>
            </div>
        </div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        let scene, camera, renderer, controls, carModel;
        
        // Superkarlar ro'yxati (bu yerga o'z modellaringizni qo'shishingiz mumkin)
        const carCollection = [
            'free__lamborghini_terzo_millennio.glb',
            'https://raw.githubusercontent.com/mrdoob/three.js/master/examples/models/gltf/Ferrari.glb'
        ];
        let currentCarIndex = 0;

        init();
        animate();

        function init() {
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.05);

            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(7, 3, 7);

            renderer = new THREE.WebGLRenderer({ antialias: true, powerPreference: "high-performance" });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            scene.add(ambientLight);

            const neonLight = new THREE.SpotLight(0x2ecc71, 150);
            neonLight.position.set(5, 10, 5);
            neonLight.castShadow = true;
            scene.add(neonLight);

            // Floor Grid
            const grid = new THREE.GridHelper(50, 50, 0x2ecc71, 0x111111);
            grid.position.y = -1.2;
            scene.add(grid);

            loadCar(carCollection[currentCarIndex]);

            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.autoRotate = true;

            window.addEventListener('resize', onWindowResize);
        }

        function loadCar(path) {
            if (carModel) scene.remove(carModel);
            
            const loader = new GLTFLoader();
            loader.load(path, (gltf) => {
                carModel = gltf.scene;
                carModel.traverse((node) => {
                    if (node.isMesh) {
                        node.material.metalness = 1.0;
                        node.material.roughness = 0.1;
                        // Maxsus yashil tus berish
                        if(node.name.includes('body')) node.material.color.set(0x013220);
                    }
                });
                carModel.scale.set(3, 3, 3);
                carModel.position.y = -1.2;
                scene.add(carModel);
            });
        }

        // Admin panel mantiqi
        window.toggleAdmin = () => {
            document.getElementById('adminPanel').classList.toggle('active');
        };

        window.nextCar = () => {
            currentCarIndex = (currentCarIndex + 1) % carCollection.length;
            loadCar(carCollection[currentCarIndex]);
        };

        window.toggleAutoRotate = () => {
            controls.autoRotate = !controls.autoRotate;
        };

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
    </script>
</body>
</html>
